"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./hooks/usePresaleProgram.ts":
/*!************************************!*\
  !*** ./hooks/usePresaleProgram.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePresaleProgram: function() { return /* binding */ usePresaleProgram; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _solana_wallet_adapter_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @solana/wallet-adapter-react */ \"./node_modules/@solana/wallet-adapter-react/lib/esm/index.js\");\n/* harmony import */ var _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @solana/web3.js */ \"./node_modules/@solana/web3.js/lib/index.browser.esm.js\");\n/* harmony import */ var _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @coral-xyz/anchor */ \"./node_modules/@coral-xyz/anchor/dist/browser/index.js\");\n/* harmony import */ var _solana_spl_token__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @solana/spl-token */ \"./node_modules/@solana/spl-token/lib/esm/index.js\");\n/* harmony import */ var _utils_presale_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/presale.json */ \"./utils/presale.json\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")[\"Buffer\"];\n\n\n\n\n\n\n// Program ID from the IDL\nconst programId = new _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey(\"F8F9Ny7p3jXkZctSmzZFfDnpdhrqnCW4tQnbqVYWHcbv\");\nconst plasmaMint = new _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey(\"ARTBJwHjYbxDFY9i2qLaGddmTgWDzXh4hkfuEWisFipZ\");\n// Seeds for PDAs\nconst VAULT_SEED = Buffer.from(\"vault\");\nconst USER_INFO_SEED = Buffer.from(\"user_info\");\nconst usePresaleProgram = ()=>{\n    const { connection } = (0,_solana_wallet_adapter_react__WEBPACK_IMPORTED_MODULE_4__.useConnection)();\n    const wallet = (0,_solana_wallet_adapter_react__WEBPACK_IMPORTED_MODULE_4__.useWallet)();\n    const { publicKey, sendTransaction } = wallet;\n    const [presaleAccount, setPresaleAccount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [userInfo, setUserInfo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Helper to get the program instance\n    const getProgram = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!publicKey) return null;\n        try {\n            // Create a proper AnchorProvider\n            const provider = new _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.AnchorProvider(connection, wallet, {\n                commitment: \"confirmed\"\n            });\n            // @ts-ignore - idl type mismatch can be ignored\n            return new _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.Program(_utils_presale_json__WEBPACK_IMPORTED_MODULE_3__, programId, provider);\n        } catch (error) {\n            console.error(\"Error creating program instance:\", error);\n            return null;\n        }\n    }, [\n        connection,\n        publicKey,\n        wallet\n    ]);\n    const fetchPresaleData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        try {\n            setIsLoading(true);\n            const program = getProgram();\n            if (!program) return;\n            // Fetch all presale accounts\n            const presales = await program.account.presaleAccount.all();\n            if (presales.length > 0) {\n                setPresaleAccount({\n                    ...presales[0].account,\n                    publicKey: presales[0].publicKey\n                });\n            }\n        } catch (error) {\n            console.error(\"Error fetching presale data:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        getProgram\n    ]);\n    const fetchUserInfo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!publicKey) return;\n        try {\n            setIsLoading(true);\n            const program = getProgram();\n            if (!program) return;\n            // Get PDA for user info account\n            const [userInfoPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                USER_INFO_SEED,\n                publicKey.toBuffer(),\n                plasmaMint.toBuffer()\n            ], programId);\n            try {\n                const userInfoAccount = await program.account.userInfo.fetch(userInfoPda);\n                setUserInfo(userInfoAccount);\n            } catch (error) {\n                // User info account doesn't exist yet\n                setUserInfo(null);\n            }\n        } catch (error) {\n            console.error(\"Error fetching user info:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        publicKey,\n        getProgram\n    ]);\n    const initializePresale = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (pricePerToken, totalAllocation, treasury)=>{\n        if (!publicKey) return;\n        try {\n            setIsLoading(true);\n            const program = getProgram();\n            if (!program) return;\n            // Get PDA for presale vault\n            const [vaultPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                VAULT_SEED,\n                plasmaMint.toBuffer()\n            ], programId);\n            // Get PDA for vault authority\n            const [vaultAuthorityPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                VAULT_SEED,\n                plasmaMint.toBuffer()\n            ], programId);\n            // Create a new account for presale state\n            const presaleKeypair = _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.web3.Keypair.generate();\n            const tx = await program.methods.initialize(new _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.BN(pricePerToken), new _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.BN(totalAllocation)).accounts({\n                presale: presaleKeypair.publicKey,\n                plasmaMint: plasmaMint,\n                presaleVault: vaultPda,\n                presaleVaultAuthority: vaultAuthorityPda,\n                treasury: treasury,\n                authority: publicKey,\n                systemProgram: _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.SystemProgram.programId,\n                tokenProgram: _solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.TOKEN_PROGRAM_ID,\n                rent: _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.web3.SYSVAR_RENT_PUBKEY\n            }).signers([\n                presaleKeypair\n            ]).transaction();\n            const signature = await sendTransaction(tx, connection);\n            await connection.confirmTransaction(signature, \"confirmed\");\n            console.log(\"Presale initialized with signature:\", signature);\n            fetchPresaleData();\n        } catch (error) {\n            console.error(\"Error initializing presale:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        publicKey,\n        getProgram,\n        connection,\n        sendTransaction,\n        fetchPresaleData\n    ]);\n    const buyTokens = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (amount)=>{\n        if (!publicKey || !presaleAccount) return;\n        try {\n            setIsLoading(true);\n            const program = getProgram();\n            if (!program) return;\n            // Get PDA for presale vault\n            const [vaultPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                VAULT_SEED,\n                plasmaMint.toBuffer()\n            ], programId);\n            // Get PDA for vault authority\n            const [vaultAuthorityPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                VAULT_SEED,\n                plasmaMint.toBuffer()\n            ], programId);\n            // Get PDA for user info\n            const [userInfoPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                USER_INFO_SEED,\n                publicKey.toBuffer(),\n                plasmaMint.toBuffer()\n            ], programId);\n            // Get user vault for tokens\n            const userVault = await (0,_solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.getAssociatedTokenAddress)(plasmaMint, userInfoPda, true);\n            const treasuryAccount = presaleAccount.treasury;\n            const tx = await program.methods.buyTokens(new _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.BN(amount)).accounts({\n                presale: presaleAccount.publicKey,\n                presaleVault: vaultPda,\n                presaleVaultAuthority: vaultAuthorityPda,\n                userInfo: userInfoPda,\n                userVault: userVault,\n                plasmaMint: plasmaMint,\n                treasuryAccount: treasuryAccount,\n                buyer: publicKey,\n                systemProgram: _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.SystemProgram.programId,\n                tokenProgram: _solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.TOKEN_PROGRAM_ID,\n                associatedTokenProgram: _solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.ASSOCIATED_TOKEN_PROGRAM_ID,\n                rent: _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.web3.SYSVAR_RENT_PUBKEY\n            }).transaction();\n            const signature = await sendTransaction(tx, connection);\n            await connection.confirmTransaction(signature, \"confirmed\");\n            console.log(\"Tokens purchased with signature:\", signature);\n            fetchUserInfo();\n            fetchPresaleData();\n        } catch (error) {\n            console.error(\"Error buying tokens:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        publicKey,\n        presaleAccount,\n        getProgram,\n        connection,\n        sendTransaction,\n        fetchUserInfo,\n        fetchPresaleData\n    ]);\n    const claimTokens = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!publicKey || !userInfo) return;\n        try {\n            setIsLoading(true);\n            const program = getProgram();\n            if (!program) return;\n            // Get PDA for user info\n            const [userInfoPda] = _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.PublicKey.findProgramAddressSync([\n                USER_INFO_SEED,\n                publicKey.toBuffer(),\n                plasmaMint.toBuffer()\n            ], programId);\n            // Get user vault\n            const userVault = await (0,_solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.getAssociatedTokenAddress)(plasmaMint, userInfoPda, true);\n            // Get user token account\n            const userTokenAccount = await (0,_solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.getAssociatedTokenAddress)(plasmaMint, publicKey);\n            const tx = await program.methods.claimTokens().accounts({\n                userInfo: userInfoPda,\n                userVault: userVault,\n                userTokenAccount: userTokenAccount,\n                plasmaMint: plasmaMint,\n                buyer: publicKey,\n                systemProgram: _solana_web3_js__WEBPACK_IMPORTED_MODULE_1__.SystemProgram.programId,\n                tokenProgram: _solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.TOKEN_PROGRAM_ID,\n                associatedTokenProgram: _solana_spl_token__WEBPACK_IMPORTED_MODULE_5__.ASSOCIATED_TOKEN_PROGRAM_ID,\n                rent: _coral_xyz_anchor__WEBPACK_IMPORTED_MODULE_2__.web3.SYSVAR_RENT_PUBKEY\n            }).transaction();\n            const signature = await sendTransaction(tx, connection);\n            await connection.confirmTransaction(signature, \"confirmed\");\n            console.log(\"Tokens claimed with signature:\", signature);\n            fetchUserInfo();\n        } catch (error) {\n            console.error(\"Error claiming tokens:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        publicKey,\n        userInfo,\n        getProgram,\n        connection,\n        sendTransaction,\n        fetchUserInfo\n    ]);\n    const togglePresale = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (active)=>{\n        if (!publicKey || !presaleAccount) return;\n        try {\n            setIsLoading(true);\n            const program = getProgram();\n            if (!program) return;\n            const tx = await program.methods.togglePresale(active).accounts({\n                presale: presaleAccount.publicKey,\n                authority: publicKey\n            }).transaction();\n            const signature = await sendTransaction(tx, connection);\n            await connection.confirmTransaction(signature, \"confirmed\");\n            console.log(\"Presale \".concat(active ? \"activated\" : \"deactivated\", \" with signature:\"), signature);\n            fetchPresaleData();\n        } catch (error) {\n            console.error(\"Error toggling presale:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        publicKey,\n        presaleAccount,\n        getProgram,\n        connection,\n        sendTransaction,\n        fetchPresaleData\n    ]);\n    return {\n        presaleAccount,\n        userInfo,\n        isLoading,\n        fetchPresaleData,\n        fetchUserInfo,\n        initializePresale,\n        buyTokens,\n        claimTokens,\n        togglePresale\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDZjtJQUNGLEdBQUc7UUFBQ1A7UUFBV0U7UUFBZ0JNO1FBQVlWO1FBQVlHO1FBQWlCWTtLQUFpQjtJQUV6RixPQUFPO1FBQ0xYO1FBQ0FFO1FBQ0FFO1FBQ0FPO1FBQ0FNO1FBQ0FNO1FBQ0EwQjtRQUNBTTtRQUNBRTtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ob29rcy91c2VQcmVzYWxlUHJvZ3JhbS50cz9lYThkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQ29ubmVjdGlvbiwgdXNlV2FsbGV0IH0gZnJvbSAnQHNvbGFuYS93YWxsZXQtYWRhcHRlci1yZWFjdCc7XHJcbmltcG9ydCB7IFB1YmxpY0tleSwgVHJhbnNhY3Rpb24sIFN5c3RlbVByb2dyYW0sIExBTVBPUlRTX1BFUl9TT0wgfSBmcm9tICdAc29sYW5hL3dlYjMuanMnO1xyXG5pbXBvcnQgeyBCTiwgUHJvZ3JhbSwgd2ViMywgQW5jaG9yUHJvdmlkZXIgfSBmcm9tICdAY29yYWwteHl6L2FuY2hvcic7XHJcbmltcG9ydCB7IFxyXG4gIGdldEFzc29jaWF0ZWRUb2tlbkFkZHJlc3MsIFxyXG4gIGdldEFjY291bnQsXHJcbiAgVE9LRU5fUFJPR1JBTV9JRCxcclxuICBBU1NPQ0lBVEVEX1RPS0VOX1BST0dSQU1fSURcclxufSBmcm9tICdAc29sYW5hL3NwbC10b2tlbic7XHJcbmltcG9ydCBpZGwgZnJvbSAnLi4vdXRpbHMvcHJlc2FsZS5qc29uJztcclxuXHJcbi8vIFByb2dyYW0gSUQgZnJvbSB0aGUgSURMXHJcbmNvbnN0IHByb2dyYW1JZCA9IG5ldyBQdWJsaWNLZXkoJ0Y4RjlOeTdwM2pYa1pjdFNtelpGZkRucGRocnFuQ1c0dFFuYnFWWVdIY2J2Jyk7XHJcbmNvbnN0IHBsYXNtYU1pbnQgPSBuZXcgUHVibGljS2V5KCdBUlRCSndIallieERGWTlpMnFMYUdkZG1UZ1dEelhoNGhrZnVFV2lzRmlwWicpO1xyXG5cclxuLy8gU2VlZHMgZm9yIFBEQXNcclxuY29uc3QgVkFVTFRfU0VFRCA9IEJ1ZmZlci5mcm9tKCd2YXVsdCcpO1xyXG5jb25zdCBVU0VSX0lORk9fU0VFRCA9IEJ1ZmZlci5mcm9tKCd1c2VyX2luZm8nKTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VQcmVzYWxlUHJvZ3JhbSA9ICgpID0+IHtcclxuICBjb25zdCB7IGNvbm5lY3Rpb24gfSA9IHVzZUNvbm5lY3Rpb24oKTtcclxuICBjb25zdCB3YWxsZXQgPSB1c2VXYWxsZXQoKTtcclxuICBjb25zdCB7IHB1YmxpY0tleSwgc2VuZFRyYW5zYWN0aW9uIH0gPSB3YWxsZXQ7XHJcbiAgY29uc3QgW3ByZXNhbGVBY2NvdW50LCBzZXRQcmVzYWxlQWNjb3VudF0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xyXG4gIGNvbnN0IFt1c2VySW5mbywgc2V0VXNlckluZm9dID0gdXNlU3RhdGU8YW55PihudWxsKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBIZWxwZXIgdG8gZ2V0IHRoZSBwcm9ncmFtIGluc3RhbmNlXHJcbiAgY29uc3QgZ2V0UHJvZ3JhbSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmICghcHVibGljS2V5KSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ3JlYXRlIGEgcHJvcGVyIEFuY2hvclByb3ZpZGVyXHJcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IEFuY2hvclByb3ZpZGVyKFxyXG4gICAgICAgIGNvbm5lY3Rpb24sIFxyXG4gICAgICAgIHdhbGxldCBhcyBhbnksIFxyXG4gICAgICAgIHsgY29tbWl0bWVudDogJ2NvbmZpcm1lZCcgfVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgLy8gQHRzLWlnbm9yZSAtIGlkbCB0eXBlIG1pc21hdGNoIGNhbiBiZSBpZ25vcmVkXHJcbiAgICAgIHJldHVybiBuZXcgUHJvZ3JhbShpZGwsIHByb2dyYW1JZCwgcHJvdmlkZXIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIHByb2dyYW0gaW5zdGFuY2U6XCIsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSwgW2Nvbm5lY3Rpb24sIHB1YmxpY0tleSwgd2FsbGV0XSk7XHJcblxyXG4gIGNvbnN0IGZldGNoUHJlc2FsZURhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHByb2dyYW0gPSBnZXRQcm9ncmFtKCk7XHJcbiAgICAgIGlmICghcHJvZ3JhbSkgcmV0dXJuO1xyXG5cclxuICAgICAgLy8gRmV0Y2ggYWxsIHByZXNhbGUgYWNjb3VudHNcclxuICAgICAgY29uc3QgcHJlc2FsZXMgPSBhd2FpdCBwcm9ncmFtLmFjY291bnQucHJlc2FsZUFjY291bnQuYWxsKCk7XHJcbiAgICAgIGlmIChwcmVzYWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgc2V0UHJlc2FsZUFjY291bnQoe1xyXG4gICAgICAgICAgLi4ucHJlc2FsZXNbMF0uYWNjb3VudCxcclxuICAgICAgICAgIHB1YmxpY0tleTogcHJlc2FsZXNbMF0ucHVibGljS2V5XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByZXNhbGUgZGF0YTonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtnZXRQcm9ncmFtXSk7XHJcblxyXG4gIGNvbnN0IGZldGNoVXNlckluZm8gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXB1YmxpY0tleSkgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgY29uc3QgcHJvZ3JhbSA9IGdldFByb2dyYW0oKTtcclxuICAgICAgaWYgKCFwcm9ncmFtKSByZXR1cm47XHJcblxyXG4gICAgICAvLyBHZXQgUERBIGZvciB1c2VyIGluZm8gYWNjb3VudFxyXG4gICAgICBjb25zdCBbdXNlckluZm9QZGFdID0gUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzc1N5bmMoXHJcbiAgICAgICAgW1VTRVJfSU5GT19TRUVELCBwdWJsaWNLZXkudG9CdWZmZXIoKSwgcGxhc21hTWludC50b0J1ZmZlcigpXSxcclxuICAgICAgICBwcm9ncmFtSWRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXNlckluZm9BY2NvdW50ID0gYXdhaXQgcHJvZ3JhbS5hY2NvdW50LnVzZXJJbmZvLmZldGNoKHVzZXJJbmZvUGRhKTtcclxuICAgICAgICBzZXRVc2VySW5mbyh1c2VySW5mb0FjY291bnQpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIFVzZXIgaW5mbyBhY2NvdW50IGRvZXNuJ3QgZXhpc3QgeWV0XHJcbiAgICAgICAgc2V0VXNlckluZm8obnVsbCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgaW5mbzonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtwdWJsaWNLZXksIGdldFByb2dyYW1dKTtcclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZVByZXNhbGUgPSB1c2VDYWxsYmFjayhhc3luYyAoXHJcbiAgICBwcmljZVBlclRva2VuOiBudW1iZXIsXHJcbiAgICB0b3RhbEFsbG9jYXRpb246IG51bWJlcixcclxuICAgIHRyZWFzdXJ5OiBQdWJsaWNLZXlcclxuICApID0+IHtcclxuICAgIGlmICghcHVibGljS2V5KSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBjb25zdCBwcm9ncmFtID0gZ2V0UHJvZ3JhbSgpO1xyXG4gICAgICBpZiAoIXByb2dyYW0pIHJldHVybjtcclxuXHJcbiAgICAgIC8vIEdldCBQREEgZm9yIHByZXNhbGUgdmF1bHRcclxuICAgICAgY29uc3QgW3ZhdWx0UGRhXSA9IFB1YmxpY0tleS5maW5kUHJvZ3JhbUFkZHJlc3NTeW5jKFxyXG4gICAgICAgIFtWQVVMVF9TRUVELCBwbGFzbWFNaW50LnRvQnVmZmVyKCldLFxyXG4gICAgICAgIHByb2dyYW1JZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gR2V0IFBEQSBmb3IgdmF1bHQgYXV0aG9yaXR5XHJcbiAgICAgIGNvbnN0IFt2YXVsdEF1dGhvcml0eVBkYV0gPSBQdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhcclxuICAgICAgICBbVkFVTFRfU0VFRCwgcGxhc21hTWludC50b0J1ZmZlcigpXSxcclxuICAgICAgICBwcm9ncmFtSWRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBhY2NvdW50IGZvciBwcmVzYWxlIHN0YXRlXHJcbiAgICAgIGNvbnN0IHByZXNhbGVLZXlwYWlyID0gd2ViMy5LZXlwYWlyLmdlbmVyYXRlKCk7XHJcblxyXG4gICAgICBjb25zdCB0eCA9IGF3YWl0IHByb2dyYW0ubWV0aG9kc1xyXG4gICAgICAgIC5pbml0aWFsaXplKFxyXG4gICAgICAgICAgbmV3IEJOKHByaWNlUGVyVG9rZW4pLFxyXG4gICAgICAgICAgbmV3IEJOKHRvdGFsQWxsb2NhdGlvbiksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5hY2NvdW50cyh7XHJcbiAgICAgICAgICBwcmVzYWxlOiBwcmVzYWxlS2V5cGFpci5wdWJsaWNLZXksXHJcbiAgICAgICAgICBwbGFzbWFNaW50OiBwbGFzbWFNaW50LFxyXG4gICAgICAgICAgcHJlc2FsZVZhdWx0OiB2YXVsdFBkYSxcclxuICAgICAgICAgIHByZXNhbGVWYXVsdEF1dGhvcml0eTogdmF1bHRBdXRob3JpdHlQZGEsXHJcbiAgICAgICAgICB0cmVhc3VyeTogdHJlYXN1cnksXHJcbiAgICAgICAgICBhdXRob3JpdHk6IHB1YmxpY0tleSxcclxuICAgICAgICAgIHN5c3RlbVByb2dyYW06IFN5c3RlbVByb2dyYW0ucHJvZ3JhbUlkLFxyXG4gICAgICAgICAgdG9rZW5Qcm9ncmFtOiBUT0tFTl9QUk9HUkFNX0lELFxyXG4gICAgICAgICAgcmVudDogd2ViMy5TWVNWQVJfUkVOVF9QVUJLRVksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2lnbmVycyhbcHJlc2FsZUtleXBhaXJdKVxyXG4gICAgICAgIC50cmFuc2FjdGlvbigpO1xyXG5cclxuICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgc2VuZFRyYW5zYWN0aW9uKHR4LCBjb25uZWN0aW9uKTtcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25maXJtVHJhbnNhY3Rpb24oc2lnbmF0dXJlLCAnY29uZmlybWVkJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdQcmVzYWxlIGluaXRpYWxpemVkIHdpdGggc2lnbmF0dXJlOicsIHNpZ25hdHVyZSk7XHJcbiAgICAgIGZldGNoUHJlc2FsZURhdGEoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBwcmVzYWxlOicsIGVycm9yKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW3B1YmxpY0tleSwgZ2V0UHJvZ3JhbSwgY29ubmVjdGlvbiwgc2VuZFRyYW5zYWN0aW9uLCBmZXRjaFByZXNhbGVEYXRhXSk7XHJcblxyXG4gIGNvbnN0IGJ1eVRva2VucyA9IHVzZUNhbGxiYWNrKGFzeW5jIChhbW91bnQ6IG51bWJlcikgPT4ge1xyXG4gICAgaWYgKCFwdWJsaWNLZXkgfHwgIXByZXNhbGVBY2NvdW50KSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBjb25zdCBwcm9ncmFtID0gZ2V0UHJvZ3JhbSgpO1xyXG4gICAgICBpZiAoIXByb2dyYW0pIHJldHVybjtcclxuXHJcbiAgICAgIC8vIEdldCBQREEgZm9yIHByZXNhbGUgdmF1bHRcclxuICAgICAgY29uc3QgW3ZhdWx0UGRhXSA9IFB1YmxpY0tleS5maW5kUHJvZ3JhbUFkZHJlc3NTeW5jKFxyXG4gICAgICAgIFtWQVVMVF9TRUVELCBwbGFzbWFNaW50LnRvQnVmZmVyKCldLFxyXG4gICAgICAgIHByb2dyYW1JZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gR2V0IFBEQSBmb3IgdmF1bHQgYXV0aG9yaXR5XHJcbiAgICAgIGNvbnN0IFt2YXVsdEF1dGhvcml0eVBkYV0gPSBQdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhcclxuICAgICAgICBbVkFVTFRfU0VFRCwgcGxhc21hTWludC50b0J1ZmZlcigpXSxcclxuICAgICAgICBwcm9ncmFtSWRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEdldCBQREEgZm9yIHVzZXIgaW5mb1xyXG4gICAgICBjb25zdCBbdXNlckluZm9QZGFdID0gUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzc1N5bmMoXHJcbiAgICAgICAgW1VTRVJfSU5GT19TRUVELCBwdWJsaWNLZXkudG9CdWZmZXIoKSwgcGxhc21hTWludC50b0J1ZmZlcigpXSxcclxuICAgICAgICBwcm9ncmFtSWRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEdldCB1c2VyIHZhdWx0IGZvciB0b2tlbnNcclxuICAgICAgY29uc3QgdXNlclZhdWx0ID0gYXdhaXQgZ2V0QXNzb2NpYXRlZFRva2VuQWRkcmVzcyhcclxuICAgICAgICBwbGFzbWFNaW50LFxyXG4gICAgICAgIHVzZXJJbmZvUGRhLFxyXG4gICAgICAgIHRydWVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHRyZWFzdXJ5QWNjb3VudCA9IHByZXNhbGVBY2NvdW50LnRyZWFzdXJ5O1xyXG5cclxuICAgICAgY29uc3QgdHggPSBhd2FpdCBwcm9ncmFtLm1ldGhvZHNcclxuICAgICAgICAuYnV5VG9rZW5zKFxyXG4gICAgICAgICAgbmV3IEJOKGFtb3VudClcclxuICAgICAgICApXHJcbiAgICAgICAgLmFjY291bnRzKHtcclxuICAgICAgICAgIHByZXNhbGU6IHByZXNhbGVBY2NvdW50LnB1YmxpY0tleSxcclxuICAgICAgICAgIHByZXNhbGVWYXVsdDogdmF1bHRQZGEsXHJcbiAgICAgICAgICBwcmVzYWxlVmF1bHRBdXRob3JpdHk6IHZhdWx0QXV0aG9yaXR5UGRhLFxyXG4gICAgICAgICAgdXNlckluZm86IHVzZXJJbmZvUGRhLFxyXG4gICAgICAgICAgdXNlclZhdWx0OiB1c2VyVmF1bHQsXHJcbiAgICAgICAgICBwbGFzbWFNaW50OiBwbGFzbWFNaW50LFxyXG4gICAgICAgICAgdHJlYXN1cnlBY2NvdW50OiB0cmVhc3VyeUFjY291bnQsXHJcbiAgICAgICAgICBidXllcjogcHVibGljS2V5LFxyXG4gICAgICAgICAgc3lzdGVtUHJvZ3JhbTogU3lzdGVtUHJvZ3JhbS5wcm9ncmFtSWQsXHJcbiAgICAgICAgICB0b2tlblByb2dyYW06IFRPS0VOX1BST0dSQU1fSUQsXHJcbiAgICAgICAgICBhc3NvY2lhdGVkVG9rZW5Qcm9ncmFtOiBBU1NPQ0lBVEVEX1RPS0VOX1BST0dSQU1fSUQsXHJcbiAgICAgICAgICByZW50OiB3ZWIzLlNZU1ZBUl9SRU5UX1BVQktFWSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50cmFuc2FjdGlvbigpO1xyXG5cclxuICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgc2VuZFRyYW5zYWN0aW9uKHR4LCBjb25uZWN0aW9uKTtcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25maXJtVHJhbnNhY3Rpb24oc2lnbmF0dXJlLCAnY29uZmlybWVkJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdUb2tlbnMgcHVyY2hhc2VkIHdpdGggc2lnbmF0dXJlOicsIHNpZ25hdHVyZSk7XHJcbiAgICAgIGZldGNoVXNlckluZm8oKTtcclxuICAgICAgZmV0Y2hQcmVzYWxlRGF0YSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYnV5aW5nIHRva2VuczonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtwdWJsaWNLZXksIHByZXNhbGVBY2NvdW50LCBnZXRQcm9ncmFtLCBjb25uZWN0aW9uLCBzZW5kVHJhbnNhY3Rpb24sIGZldGNoVXNlckluZm8sIGZldGNoUHJlc2FsZURhdGFdKTtcclxuXHJcbiAgY29uc3QgY2xhaW1Ub2tlbnMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXB1YmxpY0tleSB8fCAhdXNlckluZm8pIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHByb2dyYW0gPSBnZXRQcm9ncmFtKCk7XHJcbiAgICAgIGlmICghcHJvZ3JhbSkgcmV0dXJuO1xyXG5cclxuICAgICAgLy8gR2V0IFBEQSBmb3IgdXNlciBpbmZvXHJcbiAgICAgIGNvbnN0IFt1c2VySW5mb1BkYV0gPSBQdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhcclxuICAgICAgICBbVVNFUl9JTkZPX1NFRUQsIHB1YmxpY0tleS50b0J1ZmZlcigpLCBwbGFzbWFNaW50LnRvQnVmZmVyKCldLFxyXG4gICAgICAgIHByb2dyYW1JZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gR2V0IHVzZXIgdmF1bHRcclxuICAgICAgY29uc3QgdXNlclZhdWx0ID0gYXdhaXQgZ2V0QXNzb2NpYXRlZFRva2VuQWRkcmVzcyhcclxuICAgICAgICBwbGFzbWFNaW50LFxyXG4gICAgICAgIHVzZXJJbmZvUGRhLFxyXG4gICAgICAgIHRydWVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEdldCB1c2VyIHRva2VuIGFjY291bnRcclxuICAgICAgY29uc3QgdXNlclRva2VuQWNjb3VudCA9IGF3YWl0IGdldEFzc29jaWF0ZWRUb2tlbkFkZHJlc3MoXHJcbiAgICAgICAgcGxhc21hTWludCxcclxuICAgICAgICBwdWJsaWNLZXlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHR4ID0gYXdhaXQgcHJvZ3JhbS5tZXRob2RzXHJcbiAgICAgICAgLmNsYWltVG9rZW5zKClcclxuICAgICAgICAuYWNjb3VudHMoe1xyXG4gICAgICAgICAgdXNlckluZm86IHVzZXJJbmZvUGRhLFxyXG4gICAgICAgICAgdXNlclZhdWx0OiB1c2VyVmF1bHQsXHJcbiAgICAgICAgICB1c2VyVG9rZW5BY2NvdW50OiB1c2VyVG9rZW5BY2NvdW50LFxyXG4gICAgICAgICAgcGxhc21hTWludDogcGxhc21hTWludCxcclxuICAgICAgICAgIGJ1eWVyOiBwdWJsaWNLZXksXHJcbiAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBTeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcclxuICAgICAgICAgIHRva2VuUHJvZ3JhbTogVE9LRU5fUFJPR1JBTV9JRCxcclxuICAgICAgICAgIGFzc29jaWF0ZWRUb2tlblByb2dyYW06IEFTU09DSUFURURfVE9LRU5fUFJPR1JBTV9JRCxcclxuICAgICAgICAgIHJlbnQ6IHdlYjMuU1lTVkFSX1JFTlRfUFVCS0VZLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRyYW5zYWN0aW9uKCk7XHJcblxyXG4gICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBzZW5kVHJhbnNhY3Rpb24odHgsIGNvbm5lY3Rpb24pO1xyXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbmZpcm1UcmFuc2FjdGlvbihzaWduYXR1cmUsICdjb25maXJtZWQnKTtcclxuICAgICAgY29uc29sZS5sb2coJ1Rva2VucyBjbGFpbWVkIHdpdGggc2lnbmF0dXJlOicsIHNpZ25hdHVyZSk7XHJcbiAgICAgIGZldGNoVXNlckluZm8oKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsYWltaW5nIHRva2VuczonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtwdWJsaWNLZXksIHVzZXJJbmZvLCBnZXRQcm9ncmFtLCBjb25uZWN0aW9uLCBzZW5kVHJhbnNhY3Rpb24sIGZldGNoVXNlckluZm9dKTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlUHJlc2FsZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChhY3RpdmU6IGJvb2xlYW4pID0+IHtcclxuICAgIGlmICghcHVibGljS2V5IHx8ICFwcmVzYWxlQWNjb3VudCkgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgY29uc3QgcHJvZ3JhbSA9IGdldFByb2dyYW0oKTtcclxuICAgICAgaWYgKCFwcm9ncmFtKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCB0eCA9IGF3YWl0IHByb2dyYW0ubWV0aG9kc1xyXG4gICAgICAgIC50b2dnbGVQcmVzYWxlKGFjdGl2ZSlcclxuICAgICAgICAuYWNjb3VudHMoe1xyXG4gICAgICAgICAgcHJlc2FsZTogcHJlc2FsZUFjY291bnQucHVibGljS2V5LFxyXG4gICAgICAgICAgYXV0aG9yaXR5OiBwdWJsaWNLZXksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudHJhbnNhY3Rpb24oKTtcclxuXHJcbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IHNlbmRUcmFuc2FjdGlvbih0eCwgY29ubmVjdGlvbik7XHJcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29uZmlybVRyYW5zYWN0aW9uKHNpZ25hdHVyZSwgJ2NvbmZpcm1lZCcpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgUHJlc2FsZSAke2FjdGl2ZSA/ICdhY3RpdmF0ZWQnIDogJ2RlYWN0aXZhdGVkJ30gd2l0aCBzaWduYXR1cmU6YCwgc2lnbmF0dXJlKTtcclxuICAgICAgZmV0Y2hQcmVzYWxlRGF0YSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdG9nZ2xpbmcgcHJlc2FsZTonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtwdWJsaWNLZXksIHByZXNhbGVBY2NvdW50LCBnZXRQcm9ncmFtLCBjb25uZWN0aW9uLCBzZW5kVHJhbnNhY3Rpb24sIGZldGNoUHJlc2FsZURhdGFdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHByZXNhbGVBY2NvdW50LFxyXG4gICAgdXNlckluZm8sXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBmZXRjaFByZXNhbGVEYXRhLFxyXG4gICAgZmV0Y2hVc2VySW5mbyxcclxuICAgIGluaXRpYWxpemVQcmVzYWxlLFxyXG4gICAgYnV5VG9rZW5zLFxyXG4gICAgY2xhaW1Ub2tlbnMsXHJcbiAgICB0b2dnbGVQcmVzYWxlLFxyXG4gIH07XHJcbn07ICJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZVN0YXRlIiwidXNlQ29ubmVjdGlvbiIsInVzZVdhbGxldCIsIlB1YmxpY0tleSIsIlN5c3RlbVByb2dyYW0iLCJCTiIsIlByb2dyYW0iLCJ3ZWIzIiwiQW5jaG9yUHJvdmlkZXIiLCJnZXRBc3NvY2lhdGVkVG9rZW5BZGRyZXNzIiwiVE9LRU5fUFJPR1JBTV9JRCIsIkFTU09DSUFURURfVE9LRU5fUFJPR1JBTV9JRCIsImlkbCIsInByb2dyYW1JZCIsInBsYXNtYU1pbnQiLCJWQVVMVF9TRUVEIiwiQnVmZmVyIiwiZnJvbSIsIlVTRVJfSU5GT19TRUVEIiwidXNlUHJlc2FsZVByb2dyYW0iLCJjb25uZWN0aW9uIiwid2FsbGV0IiwicHVibGljS2V5Iiwic2VuZFRyYW5zYWN0aW9uIiwicHJlc2FsZUFjY291bnQiLCJzZXRQcmVzYWxlQWNjb3VudCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJnZXRQcm9ncmFtIiwicHJvdmlkZXIiLCJjb21taXRtZW50IiwiZXJyb3IiLCJjb25zb2xlIiwiZmV0Y2hQcmVzYWxlRGF0YSIsInByb2dyYW0iLCJwcmVzYWxlcyIsImFjY291bnQiLCJhbGwiLCJsZW5ndGgiLCJmZXRjaFVzZXJJbmZvIiwidXNlckluZm9QZGEiLCJmaW5kUHJvZ3JhbUFkZHJlc3NTeW5jIiwidG9CdWZmZXIiLCJ1c2VySW5mb0FjY291bnQiLCJmZXRjaCIsImluaXRpYWxpemVQcmVzYWxlIiwicHJpY2VQZXJUb2tlbiIsInRvdGFsQWxsb2NhdGlvbiIsInRyZWFzdXJ5IiwidmF1bHRQZGEiLCJ2YXVsdEF1dGhvcml0eVBkYSIsInByZXNhbGVLZXlwYWlyIiwiS2V5cGFpciIsImdlbmVyYXRlIiwidHgiLCJtZXRob2RzIiwiaW5pdGlhbGl6ZSIsImFjY291bnRzIiwicHJlc2FsZSIsInByZXNhbGVWYXVsdCIsInByZXNhbGVWYXVsdEF1dGhvcml0eSIsImF1dGhvcml0eSIsInN5c3RlbVByb2dyYW0iLCJ0b2tlblByb2dyYW0iLCJyZW50IiwiU1lTVkFSX1JFTlRfUFVCS0VZIiwic2lnbmVycyIsInRyYW5zYWN0aW9uIiwic2lnbmF0dXJlIiwiY29uZmlybVRyYW5zYWN0aW9uIiwibG9nIiwiYnV5VG9rZW5zIiwiYW1vdW50IiwidXNlclZhdWx0IiwidHJlYXN1cnlBY2NvdW50IiwiYnV5ZXIiLCJhc3NvY2lhdGVkVG9rZW5Qcm9ncmFtIiwiY2xhaW1Ub2tlbnMiLCJ1c2VyVG9rZW5BY2NvdW50IiwidG9nZ2xlUHJlc2FsZSIsImFjdGl2ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./hooks/usePresaleProgram.ts\n"));

/***/ })

});